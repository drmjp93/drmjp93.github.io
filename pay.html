<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Telemedicine ‚Äî Payment</title>

<style>
:root{
  --bg:#f5f7fa;
  --card:#ffffff;
  --muted:#6b7280;
  --accent:#0b1220;
  --pill-h:56px;
}

/* reset */
*{ box-sizing:border-box; }
body{
  margin:0; padding:20px;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:var(--bg); color:var(--accent);
}

/* top bar */
.topbar{
  display:flex; justify-content:space-between; align-items:center;
  margin-bottom:8px;
}
.back{
  display:inline-flex; align-items:center; gap:8px;
  background:#0b1220; color:#fff;
  padding:10px 16px; border-radius:10px;
  text-decoration:none; font-weight:800;
}

/* grid */
.container{
  max-width:1100px; margin:24px auto;
  display:grid; grid-template-columns:1fr 460px;
  gap:20px;
}
@media(max-width:920px){ .container{ grid-template-columns:1fr; } }

/* left card */
.card-left{
  background:#0b1220;
  color:#fff;
  border-radius:14px;
  padding:22px;
  min-height:520px;
}
.card-left h2{ margin:0 0 12px; font-size:1.6rem; }

/* right card */
.card-right{
  background:var(--card);
  border-radius:14px;
  padding:18px;
}
.alert{
  background:#fffbea;
  border:1px solid #f6e29b;
  padding:10px 12px;
  border-radius:10px;
  font-weight:700;
  margin-bottom:12px;
}

/* UPI method pills (mobile only) */
.methods{ display:flex; flex-direction:column; gap:12px; margin-bottom:12px; }
.pill{
  display:flex; height:var(--pill-h);
  background:#fff;
  border:1px solid #e5e7eb;
  border-radius:12px;
  overflow:hidden;
}
.pill .label{
  flex:1; display:flex; gap:12px; align-items:center;
  padding:12px 14px;
  cursor:pointer;
}
.pill .title{ font-weight:900; }
.pill .desc{ font-size:.85rem; color:var(--muted); }
.pill .action{
  width:110px;
  background:#0b1220; color:#fff;
  display:flex; align-items:center; justify-content:center;
  cursor:pointer; font-weight:900;
}

/* QR box */
#qrCard{
  display:none;
  background:#fff;
  border:1px solid #e5e7eb;
  border-radius:12px;
  padding:14px;
  margin-top:12px;
}
.qr-row{ display:flex; gap:12px; align-items:center; }
.qr-img{
  width:120px; height:120px;
  border:1px solid #e5e7eb;
  border-radius:8px;
  object-fit:cover;
}
.qr-sep{ width:1px; height:96px; background:#e5e7eb; }

/* UPI text/copy rules */
#upiText{ display:inline-block; font-weight:900; font-size:1.05rem; }
#copyQRupi{
  display:inline-block;
  background:#0b1220; color:#fff;
  padding:8px 12px; border-radius:8px; border:0;
  cursor:pointer; font-weight:800;
  box-shadow:0 4px 10px rgba(11,18,32,0.12);
}

/* desktop: show text, hide copy */
@media(min-width:921px){
  #copyQRupi{ display:none !important; }
  #upiText{ display:inline-block !important; }
}

/* mobile: hide text, show copy */
@media(max-width:920px){
  #upiText{ display:none !important; }
  #copyQRupi{ display:inline-block !important; }
}

/* total price */
.total{
  text-align:center;
  background:#f1f6fb;
  padding:12px;
  border-radius:10px;
  margin-top:18px;
}
.total .amount{
  font-size:1.6rem; font-weight:900; margin-top:6px;
}

/* amount selector */
.amount-row{
  display:flex; gap:8px; align-items:center;
  margin-top:12px;
}
input[type=number]{
  padding:8px 10px;
  border-radius:8px;
  border:1px solid #ddd;
  width:110px; text-align:center; font-weight:800;
}
.preset{
  padding:8px 14px;
  border-radius:8px;
  background:#eef2f7;
  border:1px solid #e6eefc;
  cursor:pointer;
  font-weight:800;
}

/* Split CTA (Option A) */
.split-cta{
  margin-top:20px;
  display:flex;
  border-radius:12px;
  overflow:hidden;
  border:1px solid #e5e7eb;
  background:#fff;
  height:72px;
}
.split-cta .left{
  flex:1;
  padding:14px 18px;
  display:flex; flex-direction:column; justify-content:center;
}
.split-cta .left .line1{
  font-family:"Arial Black", Impact, system-ui;
  font-size:1.05rem; letter-spacing:0.6px;
  font-weight:900; text-transform:uppercase;
  color:#0b1220;
}
.split-cta .left .line2{
  font-weight:700; color:#1a1a1a;
}
.split-cta .right{
  width:160px;
  background:#0b1220;
  color:#fff;
  display:flex; align-items:center; justify-content:center;
  font-weight:900; cursor:pointer;
}

/* hide selected-box entirely on mobile because not needed */
body.is-ios #selectedBox{ display:none !important; }
body.is-android #selectedBox{ display:none !important; }

/* desktop: no mobile pills */
body.is-desktop #methodsWrapper{ display:none !important; }
body.is-desktop #selectedBox{ display:none !important; }

/* toast */
#openToast{
  position:fixed; left:50%; bottom:22px;
  transform:translateX(-50%);
  background:rgba(11,18,32,0.95);
  color:#fff; padding:10px 14px;
  border-radius:12px; display:none;
  font-weight:700; z-index:9999;
}
</style>
</head>
<body>

<div class="topbar">
  <a class="back" href="telemedicine.html">‚Üê Back</a>
  <span style="color:var(--muted);font-weight:700">Secure Payment</span>
</div>

<div class="container">

  <!-- LEFT -->
  <aside class="card-left">
    <h2>Telemedicine ‚Äî Rules</h2>
    <ul style="color:#dbe6f5; line-height:1.6;">
      <li>Appointment only after payment.</li>
      <li>Fill confirmation form after payment.</li>
      <li>Emergency ‚Üí go to hospital immediately.</li>
    </ul>

    <p style="margin-top:20px; color:#e6eef9;"><strong>Follow-up</strong></p>
    <ul style="color:#dbe6f5; line-height:1.6;">
      <li>Same problem within 72 hrs ‚Üí Free.</li>
      <li>After 72 hrs ‚Üí ‚Çπ300.</li>
    </ul>

    <p style="margin-top:20px; color:#e0ecff;">After payment, fill confirmation form. You will receive time-slot details on the submitted mobile number.</p>
  </aside>

  <!-- RIGHT -->
  <section class="card-right">

    <div class="alert">‚ö†Ô∏è Confirm Payee Name: <strong>Mit J Panchani</strong></div>

    <!-- mobile upi methods -->
    <div id="methodsWrapper" class="methods"></div>

    <div id="showQRtoggle" style="margin-top:8px; background:#eef2f7; padding:10px; text-align:center; font-weight:700; border-radius:8px; cursor:pointer;">
      üì∑ Show QR Code
    </div>

    <!-- QR -->
    <div id="qrCard">
      <div style="font-weight:800;margin-bottom:8px;">Scan & Pay (UPI QR)</div>
      <div class="qr-row">
        <img id="qrImg" src="qr.jpg" class="qr-img" alt="QR">
        <div class="qr-sep"></div>

        <div style="flex:1;">
          <div style="font-size:.95rem;color:#374151;margin-bottom:8px;">UPI ID</div>
          <div style="display:flex;justify-content:space-between;align-items:center;background:#f9fafb;border:1px solid #e5e7eb;padding:10px;border-radius:8px;">
            <strong id="upiText">drmjp93@upi</strong>
            <button id="copyQRupi">Copy</button>
          </div>
        </div>
      </div>
    </div>

    <!-- total -->
    <div class="total">
      <div style="color:var(--muted);font-weight:700;">Total price</div>
      <div class="amount" id="bigAmount">‚Çπ 400</div>
    </div>

    <!-- amount selector -->
    <div class="amount-row">
      <span style="font-weight:900;">Amount</span>
      <input id="amountInput" type="number" value="400">
      <button class="preset" data-val="400">‚Çπ400</button>
      <button class="preset" data-val="300">‚Çπ300</button>
    </div>

    <div style="color:var(--muted);font-weight:700;margin-top:10px;">
      FEES: ‚Çπ400 NEW CASE ¬∑ ‚Çπ300 OLD CASE
    </div>

    <!-- FORM CTA -->
    <div class="split-cta" style="margin-top:20px;">
      <div class="left">
        <div class="line1">AFTER PAYMENT</div>
        <div class="line2">SUBMIT CONFIRMATION FORM</div>
      </div>
      <div class="right" id="openFormBtn">OPEN FORM</div>
    </div>

  </section>
</div>

<div id="openToast"></div>

<script>
/* detect platform */
function isAndroid(){ return /Android/i.test(navigator.userAgent); }
function isIOS(){
  return /iPhone|iPad|iPod/i.test(navigator.userAgent) ||
    (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);
}
let device = isAndroid() ? 'android' : isIOS() ? 'ios' : 'desktop';
document.body.classList.add('is-'+device);

/* constants */
const UPI_ID = "drmjp93@upi";
const PAYEE = "Mit J Panchani";
const NOTE = "Telemedicine Consultation";
const FORM_URL = "https://docs.google.com/forms/d/e/1FAIpQLSegoCeodeLpgCAXnSki_0kS74YONXKT_RtRl5jlyX9hAfmtbw/viewform?usp=dialog";

/* helpers */
function enc(x){ return encodeURIComponent(x); }
function buildUPI(amount){
  const a = Number(amount||0);
  const safe = (isFinite(a)&&a>0)? a.toFixed(2):"0.00";
  return `upi://pay?pa=${enc(UPI_ID)}&pn=${enc(PAYEE)}&am=${enc(safe)}&tn=${enc(NOTE)}&cu=INR`;
}

/* open GForm */
document.getElementById("openFormBtn").onclick = () => {
  window.open(FORM_URL, "_blank");
};

/* QR toggle */
document.getElementById("showQRtoggle").onclick = () => {
  const card = document.getElementById("qrCard");
  card.style.display = (card.style.display==="block")?"none":"block";
};

/* copy */
document.getElementById("copyQRupi").onclick = async ()=>{
  try{
    await navigator.clipboard.writeText(UPI_ID);
    document.getElementById("copyQRupi").textContent="Copied!";
    setTimeout(()=>document.getElementById("copyQRupi").textContent="Copy",1200);
  }catch(e){ alert("Copy failed"); }
};

/* amount updates */
const amountInput = document.getElementById("amountInput");
const bigAmount = document.getElementById("bigAmount");
function refreshAmount(){
  let v = Number(amountInput.value)||0;
  bigAmount.textContent = "‚Çπ "+v;
}
amountInput.oninput = refreshAmount;
document.querySelectorAll(".preset").forEach(b=>{
  b.onclick = ()=>{ amountInput.value=b.dataset.val; refreshAmount(); };
});
refreshAmount();

/* mobile UPI methods */
const METHODS = {
  whatsapp:{ title:"WhatsApp Pay",
    desc:"Open WhatsApp UPI", pkg:null },
  gpay:{ title:"Google Pay", desc:"Open GPay", pkg:"com.google.android.apps.nbu.paisa.user"},
  phonepe:{ title:"PhonePe", desc:"Open PhonePe", pkg:"com.phonepe.app"},
  bhim:{ title:"BHIM / UPI", desc:"Open any UPI app", pkg:"in.org.npci.upiapp"}
};

function makePill(key,def){
  const p=document.createElement("div");
  p.className="pill";
  p.innerHTML=`
    <div class="label">
      <div class="title">${def.title}</div>
      <div class="desc">${def.desc}</div>
    </div>
    <div class="action">Open</div>`;
  p.onclick = ()=>{
    const upi = buildUPI(amountInput.value);
    if(device==="android"){
      if(def.pkg){
        window.location=`intent://${upi.replace("upi://","")}#Intent;package=${def.pkg};scheme=upi;end`;
      } else window.location=upi;
    } else {
      window.location=upi;
    }
  };
  return p;
}

if(device!=="desktop"){
  const wrap=document.getElementById("methodsWrapper");
  wrap.innerHTML="";
  if(device==="ios"){
    wrap.appendChild(makePill("whatsapp",METHODS.whatsapp));
    wrap.appendChild(makePill("bhim",METHODS.bhim));
  } else {
    wrap.appendChild(makePill("gpay",METHODS.gpay));
    wrap.appendChild(makePill("phonepe",METHODS.phonepe));
    wrap.appendChild(makePill("bhim",METHODS.bhim));
    wrap.appendChild(makePill("whatsapp",METHODS.whatsapp));
  }
} else {
  document.getElementById("qrCard").style.display="block";
  document.getElementById("showQRtoggle").style.display="none";
}

/* fallback QR if local image fails */
document.getElementById("qrImg").onerror = ()=>{
  const amt=Number(amountInput.value)||0;
  const upi=buildUPI(amt);
  document.getElementById("qrImg").src =
    "https://chart.googleapis.com/chart?cht=qr&chs=240x240&chl="+encodeURIComponent(upi);
};
</script>

</body>
</html>
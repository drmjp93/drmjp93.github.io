<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pay ‚Äî Telemedicine (Bold)</title>
  <meta name="description" content="Pay for telemedicine consultation - Bold UI with UPI options" />
  <style>
    :root{
      --bg:#0f1724;
      --card:#0b1220;
      --accent:#ff4d6d;
      --accent2:#6bde8a;
      --muted:#9aa6b2;
      --glass: rgba(255,255,255,0.04);
      --pill-shadow: 0 14px 30px rgba(0,0,0,0.45);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background: linear-gradient(180deg,#071422 0%, #071a28 60%);
      color:#f8fafc;
      -webkit-font-smoothing:antialiased;
      padding:22px;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .stage{width:100%;max-width:920px}

    .card {
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      border-radius:18px;
      padding:22px;
      box-shadow: var(--pill-shadow);
      border: 1px solid rgba(255,255,255,0.04);
    }

    .top {
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:18px;
    }
    .back {
      background:transparent;
      border:1px solid rgba(255,255,255,0.06);
      color:#fff;
      padding:10px 12px;
      border-radius:999px;
      text-decoration:none;
      font-weight:700;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }

    h1{margin:0;font-size:1.25rem;letter-spacing:0.2px}
    .sub{color:var(--muted);font-size:0.92rem;margin-top:4px}

    .hero {
      display:flex;
      gap:18px;
      align-items:center;
      margin-bottom:18px;
    }
    .payee {
      flex:1;
      min-width:0;
    }
    .payee .label{font-size:0.78rem;color:var(--muted);font-weight:700}
    .payee .name{font-size:1.2rem;font-weight:900;margin-top:6px}
    .payee .upi{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;font-weight:800;margin-top:8px;font-size:1rem;color:#dff7e3}
    .payee .note{color:var(--muted);margin-top:8px;font-size:0.85rem}

    .decor {
      width:132px;height:96px;border-radius:10px;overflow:hidden;flex:0 0 132px;background:linear-gradient(90deg,#ff9fb0,#9be6b8);
      display:flex;align-items:center;justify-content:center;
      box-shadow:0 10px 30px rgba(0,0,0,0.4);
    }
    .decor img{max-width:100%;height:100%;object-fit:cover;display:block}

    /* Big button row (bold + colored) */
    .btn-row{
      display:flex;
      gap:12px;
      margin-top:18px;
      flex-wrap:wrap;
      justify-content:center;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:12px;
      padding:14px 18px;
      border-radius:999px;
      font-weight:800;
      cursor:pointer;
      border:0;
      color:#062033;
      text-decoration:none;
      min-width:160px;
      justify-content:center;
      box-shadow:0 10px 30px rgba(2,6,23,0.45), inset 0 -4px 8px rgba(255,255,255,0.03);
      transition: transform .12s ease, box-shadow .12s ease;
    }
    .pill:active{ transform: translateY(1px) }
    .pill--whatsapp{ background: linear-gradient(90deg,#25D366,#06b85a); color:#042222 }
    .pill--gpay{ background: linear-gradient(90deg,#4285F4,#1a65f0); color:#fff }
    .pill--phonepe{ background: linear-gradient(90deg,#7b61ff,#4c1db3); color:#fff }
    .pill--bhim{ background: linear-gradient(90deg,#111827,#0b1220); color:#fff; border:1px solid rgba(255,255,255,0.04) }
    .pill--copy{ background: linear-gradient(90deg,#ffd166,#ffb84a); color:#072033 }
    .pill--openupi{ background: linear-gradient(90deg,#ff4d6d,#ff7a95); color:#fff }

    .small-note{margin-top:12px;color:var(--muted);text-align:center;font-weight:700}

    /* responsive */
    @media (max-width:720px){
      .hero{flex-direction:column;align-items:stretch}
      .decor{width:100%;height:140px}
      .pill{min-width:140px;padding:12px 14px}
    }
  </style>
</head>
<body>
  <div class="stage">
    <div class="card" role="main" aria-label="Telemedicine Payment">

      <div class="top">
        <a href="telemedicine.html" class="back" aria-label="Back to telemedicine">‚Üê Back</a>
        <div style="text-align:center">
          <h1>Secure Payment</h1>
          <div class="sub">Choose your preferred UPI method ‚Äî quick and secure</div>
        </div>
        <div style="width:48px"></div>
      </div>

      <div class="hero">
        <div class="payee">
          <div class="label">Payee</div>
          <div class="name">Dr Mit Panchani</div>

          <div class="label" style="margin-top:10px">UPI ID</div>
          <div id="upiId" class="upi">drmjp93@upi</div>

          <div class="note">Note: Telemedicine Consultation</div>
        </div>

        <div class="decor" aria-hidden="true">
          <!-- uploaded image - local path included -->
          <img src="/mnt/data/IMG_4BC426E2-94A5-42BA-8BD8-091BAAA31D38.jpeg" alt="clinic" />
        </div>
      </div>

      <div style="display:flex;justify-content:center;margin-top:10px;gap:12px;align-items:center">
        <div style="font-weight:900;font-size:1.1rem;margin-right:12px">Amount</div>
        <input id="amount" type="number" value="500" min="1" style="padding:10px 12px;border-radius:8px;border:0;background:rgba(255,255,255,0.03);color:#fff;font-weight:800;width:120px;text-align:center" />
      </div>

      <!-- Bold pill buttons -->
      <div class="btn-row" role="group" aria-label="Payment options">

        <!-- WhatsApp (preferred on iOS; works on many phones) -->
        <a id="waBtn" class="pill pill--whatsapp" href="#" aria-label="Pay via WhatsApp (opens payment)">
          <span>üí¨</span>
          <span>Open WhatsApp to Pay</span>
        </a>

        <!-- Open UPI app (universal) -->
        <a id="openUpi" class="pill pill--openupi" href="#" aria-label="Open UPI app">
          <span>‚ö°</span>
          <span>Open UPI app</span>
        </a>

        <!-- Copy UPI -->
        <button id="copyBtn" class="pill pill--copy" aria-label="Copy UPI ID">
          <span>üìã</span>
          <span>Copy UPI ID</span>
        </button>
      </div>

      <!-- Android-only app specific row (hidden on iOS/desktop) -->
      <div id="androidRow" style="display:flex;gap:12px;justify-content:center;margin-top:14px;flex-wrap:wrap" aria-hidden="true">
        <a id="gpayBtn" class="pill pill--gpay" href="#" aria-label="Open Google Pay">üü¶ Google Pay</a>
        <a id="phonepeBtn" class="pill pill--phonepe" href="#" aria-label="Open PhonePe">üü™ PhonePe</a>
        <a id="bhimBtn" class="pill pill--bhim" href="#" aria-label="Open BHIM">üü© BHIM</a>
      </div>

      <div class="small-note">If you're on desktop: copy UPI ID and pay from your phone. No transaction is recorded automatically ‚Äî staff will reconcile payments.</div>
    </div>
  </div>

<script>
/* Bold pay.html script
  - static-only flow (no backend)
  - safe platform detection: Android shows app buttons, iOS/desktop hides them to avoid loops
  - WhatsApp button and Open UPI use same upi:// deep-link; iOS will open the app registered for UPI (usually WhatsApp)
  - Copy button writes UPI ID to clipboard
*/

const UPI_ID = 'drmjp93@upi';
const PAYEE = 'Dr Mit Panchani';
const NOTE = 'Telemedicine Consultation';

function isAndroid(){ return /Android/i.test(navigator.userAgent); }
function isIOS(){ return /iPhone|iPad|iPod/i.test(navigator.userAgent); }
function encode(v){ return encodeURIComponent(v); }

function buildUpi(amount){
  const am = Number(amount).toFixed(2);
  return `upi://pay?pa=${encode(UPI_ID)}&pn=${encode(PAYEE)}&am=${encode(am)}&tn=${encode(NOTE)}&cu=INR`;
}

// safe open helper
function safeOpen(url){
  try{ window.location.href = url; } catch(e){}
}

// init UI
document.addEventListener('DOMContentLoaded', ()=>{

  const amountEl = document.getElementById('amount');
  const waBtn = document.getElementById('waBtn');
  const openUpi = document.getElementById('openUpi');
  const copyBtn = document.getElementById('copyBtn');
  const androidRow = document.getElementById('androidRow');
  const gpayBtn = document.getElementById('gpayBtn');
  const phonepeBtn = document.getElementById('phonepeBtn');
  const bhimBtn = document.getElementById('bhimBtn');

  // set UPI display
  document.getElementById('upiId').innerText = UPI_ID;

  function refreshLinks(){
    const amt = amountEl.value || '0';
    const upi = buildUpi(amt);

    // Universal handlers
    waBtn.href = upi;         // on iOS this will open the registered handler (usually WhatsApp)
    openUpi.href = upi;

    // Android-specific intents (best-effort). Only enable on Android to avoid iOS loop issues.
    if(isAndroid()){
      androidRow.setAttribute('aria-hidden','false');
      androidRow.style.display = 'flex';
      // intent URIs for Android Chrome
      const intentBody = upi.replace('upi://','');
      gpayBtn.href = `intent://${intentBody}#Intent;package=com.google.android.apps.nbu.paisa.user;scheme=upi;end`;
      phonepeBtn.href = `intent://${intentBody}#Intent;package=com.phonepe.app;scheme=upi;end`;
      bhimBtn.href = `intent://${intentBody}#Intent;package=in.org.npci.upiapp;scheme=upi;end`;
    } else {
      androidRow.setAttribute('aria-hidden','true');
      androidRow.style.display = 'none';
      // fallback: make app links point to universal upi to be safe
      gpayBtn.href = upi; phonepeBtn.href = upi; bhimBtn.href = upi;
    }
  }

  // open clicks: prevent double-open
  [waBtn, openUpi, gpayBtn, phonepeBtn, bhimBtn].forEach(el=>{
    el.addEventListener('click', function(e){
      e.preventDefault();
      safeOpen(this.href);
      this.style.pointerEvents = 'none';
      setTimeout(()=> this.style.pointerEvents = 'auto', 1200);
    });
  });

  // copy
  copyBtn.addEventListener('click', async ()=>{
    try {
      await navigator.clipboard.writeText(UPI_ID);
      alert('UPI ID copied: ' + UPI_ID);
    } catch(e){
      const ta = document.createElement('textarea'); ta.value = UPI_ID; document.body.appendChild(ta); ta.select();
      try{ document.execCommand('copy'); alert('UPI ID copied'); } catch(err){ alert('Copy failed - please copy manually'); }
      ta.remove();
    }
  });

  // refresh initial and on amount change
  amountEl.addEventListener('input', refreshLinks);
  refreshLinks();

});
</script>
</body>
</html>

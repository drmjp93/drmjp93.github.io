<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Telemedicine ‚Äî Payment</title>
<meta name="description" content="Telemedicine payment page ‚Äî device aware UPI options">
<style>
  :root{
    --bg:#f5f7fa; --card:#fff; --muted:#6b7280; --accent:#0b1220;
    --primary:#2563eb; --ctaDarkStart:#0b1220; --ctaDarkEnd:#111827;
    --pill-h:56px;
  }
  *{box-sizing:border-box;}
  body{ margin:0; padding:20px; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial; background:var(--bg); color:var(--accent); -webkit-font-smoothing:antialiased;}

  .topbar{ display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }
  .back{ display:inline-flex; align-items:center; gap:8px; background:#1a1a1a; color:#fff; padding:10px 16px; border-radius:10px; text-decoration:none; font-weight:800; box-shadow:0 2px 8px rgba(0,0,0,.18); }

  .container{ max-width:1100px; margin:24px auto; display:grid; grid-template-columns:1fr 460px; gap:20px; align-items:flex-start; }
  @media(max-width:920px){ .container{ grid-template-columns:1fr; } }

  /* left */
  .card-left{ background:linear-gradient(180deg,#0f1724,#0b1220); color:#fff; border-radius:14px; padding:22px; box-shadow:0 12px 30px rgba(15,15,15,0.06); min-height:520px;}
  .card-left h2{ margin:0 0 10px; font-size:1.6rem; }
  .rules{ margin-top:12px; color:#e6eef9; line-height:1.55; }

  /* right */
  .card-right{ background:var(--card); border-radius:14px; padding:18px; box-shadow:0 12px 30px rgba(15,15,15,0.06); }
  .alert{ background:#fffbea; border:1px solid #f6e29b; padding:10px 12px; border-radius:10px; font-weight:700; color:#6b7280; margin-bottom:12px; }

  .methods{ display:flex; flex-direction:column; gap:12px; margin-bottom:10px; }
  .pill{ display:flex; border:1px solid #eef2f7; height:var(--pill-h); border-radius:12px; background:#fff; overflow:hidden; transition:all .18s ease; }
  .pill .label{ flex:1; display:flex; gap:12px; align-items:center; padding:12px 14px; cursor:pointer; }
  .pill .title{ font-weight:800; }
  .pill .desc{ font-size:.86rem; color:var(--muted); }
  .pill .action{ width:110px; background:#0b1220; color:#fff; display:flex; align-items:center; justify-content:center; font-weight:900; cursor:pointer; }

  .selected-box{ border-radius:10px; padding:10px; border:1px solid #eef2f7; display:block; }
  body.is-desktop .selected-box > div:first-child { display:none !important; }  /* hides "Selected" label block */
  body.is-desktop #selLabel { display:none !important; }
  body.is-desktop #selDesc { display:none !important; }
  body.is-desktop .amount-row { display:flex !important; }
  body.is-desktop .selected-box { border: 1px solid #e5e7eb; padding: 10px; background: #fafafa; }

  .amount-row{ display:flex; gap:8px; align-items:center; margin-top:6px; }
  input[type=number]{ padding:8px 10px; border-radius:8px; border:1px solid #ddd; width:110px; font-weight:800; text-align:center; }

  .summary{ margin-top:16px; display:flex; flex-direction:column; gap:12px; }
  .total{ text-align:center; background:#f1f6fb; padding:12px; border-radius:10px; }
  .total .amount{ font-size:1.6rem; font-weight:900; margin-top:6px; }

  /* QR card */
  #qrCard{ display:none; background:#fff; border:1px solid #e5e7eb; border-radius:12px; padding:14px; margin-top:12px; box-shadow:0 4px 14px rgba(0,0,0,0.06); }
  .qr-row{ display:flex; gap:12px; align-items:center; }
  .qr-img{ width:120px; height:120px; border-radius:8px; border:1px solid #eee; object-fit:cover; }
  .qr-sep{ width:1px; height:96px; background:#e5e7eb; }

  /* Minimal split-pill CTA (Option A text but white-left) */
.split-cta{
  margin-top:16px;
  display:flex;
  align-items:stretch;
  border-radius:12px;
  overflow:hidden;
  border:1px solid rgba(15,23,42,0.06);
  background:#fff;
  box-shadow:0 8px 20px rgba(15,23,42,0.04);
  height:72px;
}

/* LEFT: white background */
.split-cta .left{
  flex:1;
  padding:14px 18px;
  display:flex;
  flex-direction:column;
  justify-content:center;
  gap:4px;
  min-width:0;
  background:#ffffff;     /* white */
  color:#0b1220;          /* deep slate (matches your design) */
}

/* Option A Typography */
.split-cta .left .line1{
  font-weight:900;
  font-family:"Arial Black", Impact, "Segoe UI", system-ui, sans-serif;
  color:#0b1220;           /* dark */
  font-size:1.05rem;
  letter-spacing:0.6px;
  text-transform:uppercase;
  line-height:1.0;
}

.split-cta .left .line2{
  font-weight:700;
  font-size:0.95rem;
  color:#1a1a1a;           /* slightly lighter dark */
}

.split-cta .left .line3{
  font-weight:600;
  font-size:0.78rem;
  color:#6b7280;           /* muted grey */
  margin-top:4px;
}

/* RIGHT: dark button unchanged */
.split-cta .right{
  width:160px;
  background:linear-gradient(180deg,#0b1220,#111827);
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  font-weight:900;
  letter-spacing:0.2px;
  border-left:1px solid rgba(255,255,255,0.05);
}
  .split-cta .right:focus,
  .split-cta .right:active{
    outline:3px solid rgba(59,130,246,0.18);
  }

  @media (max-width:640px){
    .split-cta{ flex-direction:row; height:auto; }
    .split-cta .right{ width:100%; padding:12px 0; }
  }

  /* hide selected-box on mobile (iOS / Android) to prevent duplication */
  @media (max-width:920px){
    .selected-box { display: none !important; }
  }

  /* toast */
  #openToast{ position: fixed; left:50%; transform:translateX(-50%); bottom:22px; background: rgba(15,23,42,0.95); color:#fff; padding:10px 14px; border-radius:12px; box-shadow:0 8px 24px rgba(2,6,23,0.35); font-weight:700; z-index:99999; display:none; pointer-events:none; font-size:.95rem; }

  body.is-desktop #methodsWrapper{ display:none; }
</style>
</head>
<body>

<!-- quick sketch link for your reference in VS Code -->
<div style="max-width:1100px;margin:6px auto 0;font-size:.85rem;color:#6b7280;text-align:center;">
  <a href="/mnt/data/IMG_E139CFFF-DBD6-47A6-84C9-73AE361AB20B.jpeg" target="_blank" style="color:var(--primary);text-decoration:none;">Open sketch (local)</a>
</div>

<div class="topbar">
  <a class="back" href="telemedicine.html">‚Üê Back</a>
  <span style="color:#6b7280;font-weight:700">Secure payment</span>
</div>

<div class="container">
  <!-- LEFT CARD -->
  <aside class="card-left">
    <h2>Telemedicine ‚Äî Policy</h2>
    <div class="rules">
      <p><strong>Before consultation</strong></p>
      <ul>
        <li>Appointment given only after payment.</li>
        <li>Fill the confirmation form details to share you contact details</li>
        <li>Emergency: go to hospital immediately.</li>
      </ul>

      <p><strong>Follow-up</strong></p>
      <ul>
        <li>Same problem within 72 hrs ‚Äî free.</li>
        <li>After 72 hrs ‚Äî ‚Çπ300.</li>
      </ul>

      <p style="margin-top:14px;color:#dbe6f5;">After payment. Please fill the confirmation form (Name, Phone & Type of Payment Mode). Time for consultation will be shared on that number.</p>
    </div>
  </aside>

  <!-- RIGHT CARD -->
  <section class="card-right">
    <div class="alert">‚ö†Ô∏è Confirm Payee Name: <strong>Mit J Panchani</strong> before payment</div>

    <!-- pills (mobile only) -->
    <div id="methodsWrapper" class="methods"></div>

    <div id="showQRtoggle" style="margin-top:8px; display:none; background:#eef2f7; border-radius:8px; padding:10px; text-align:center; font-weight:700; cursor:pointer;">üì∑ Show QR Code</div>

    <!-- QR + copy -->
    <div id="qrCard">
      <div style="font-weight:700;margin-bottom:8px;">Scan & Pay (UPI QR)</div>
      <div class="qr-row">
        <img src="qr.jpg" class="qr-img" id="qrImg" alt="QR">
        <div class="qr-sep"></div>
        <div style="flex:1;">
          <div style="font-size:.95rem;color:#374151;margin-bottom:8px;">UPI ID</div>
          <div style="display:flex;justify-content:space-between;align-items:center;background:#f9fafb;border:1px solid #e5e7eb;padding:10px;border-radius:8px;">
            <strong id="upiText">drmjp93@upi</strong>
            <div style="display:flex;gap:8px;align-items:center">
              <button id="copyQRupi" style="background:#0b1220;color:#fff;border:0;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:800;">Copy</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- summary -->
    <div class="summary">
      <div class="total">
        <div style="color:var(--muted);font-weight:800;">Total price</div>
        <div class="amount" id="bigAmount">‚Çπ 400</div>
      </div>

      <div class="selected-box">
        <div style="font-weight:800;">Selected</div>
        <div id="selLabel" style="font-weight:900;margin-top:6px;">WhatsApp Pay</div>
        <div id="selDesc" style="color:var(--muted);margin-top:6px;">Opens WhatsApp Pay or UPI handler</div>

        <div class="amount-row">
          <div style="font-weight:800;margin-right:6px;">Amount</div>
          <input id="amountInput" type="number" value="400" min="1" />
          <button class="preset" data-val="400" style="padding:8px;border-radius:8px;background:#eef2f7;border:1px solid #e6eefc;cursor:pointer;font-weight:800;">‚Çπ400</button>
          <button class="preset" data-val="300" style="padding:8px;border-radius:8px;background:#eef2f7;border:1px solid #e6eefc;cursor:pointer;font-weight:800;">‚Çπ300</button>
        </div>
      </div>

      <div style="color:var(--muted);font-weight:700;margin-top:8px;">FEES: ‚Çπ400 NEW CASE ¬∑ ‚Çπ300 OLD CASE</div>

      <!-- Minimal split CTA (Option A: professional text) -->
      <div class="split-cta" role="group" aria-label="After payment fill confirmation">
        <div class="left" aria-hidden="false">
          <div class="line1"></div>
          <div class="line2">AFTER PAYMENT</div>
          <div class="line3">SUBMIT CONFIRMATION FORM</div>
        </div>
        <div class="right" id="openFormBtn" role="button" tabindex="0" aria-pressed="false">OPEN FORM</div>
      </div>

    </div>
  </section>
</div>

<div id="openToast" role="status" aria-live="polite">Opening app‚Ä¶ tap again to cancel</div>

<script>
/* device detect */
function isAndroid(){ return /Android/i.test(navigator.userAgent); }
function isIOS(){ return /iPhone|iPad|iPod/i.test(navigator.userAgent) || (navigator.platform==='MacIntel' && navigator.maxTouchPoints>1); }
function platform(){ if(isAndroid()) return 'android'; if(isIOS()) return 'ios'; return 'desktop'; }
const device = platform();
document.body.classList.add('is-'+device);

/* config */
const UPI_ID = 'drmjp93@upi';
const PAYEE = 'Mit J Panchani';
const NOTE = 'Telemedicine Consultation';
const GOOGLE_FORM_URL = 'https://docs.google.com/forms/d/e/1FAIpQLSegoCeodeLpgCAXnSki_0kS74YONXKT_RtRl5jlyX9hAfmtbw/viewform?usp=dialog';

/* elements */
let wrapper = document.getElementById('methodsWrapper');
const amountInput = document.getElementById('amountInput');
const bigAmount = document.getElementById('bigAmount');
const qrCard = document.getElementById('qrCard');
const showQRtoggle = document.getElementById('showQRtoggle');
const openFormBtn = document.getElementById('openFormBtn');
const copyQRupi = document.getElementById('copyQRupi');
const qrImg = document.getElementById('qrImg');
const upiText = document.getElementById('upiText');

const METHODS = {
  whatsapp: { title:'WhatsApp Pay', desc:'Opens WhatsApp Pay or UPI handler', pkg:null },
  gpay:     { title:'Google Pay',   desc:'Open Google Pay (Android)', pkg:'com.google.android.apps.nbu.paisa.user' },
  phonepe:  { title:'PhonePe',      desc:'Open PhonePe (Android)', pkg:'com.phonepe.app' },
  bhim:     { title:'BHIM / UPI',   desc:'Open BHIM or any UPI app', pkg:'in.org.npci.upiapp' }
};

function enc(s){ return encodeURIComponent(s); }
function buildUPI(amount){ const a = Number(amount||0); const safe = (isFinite(a)&&a>0)?a.toFixed(2):'0.00'; return `upi://pay?pa=${enc(UPI_ID)}&pn=${enc(PAYEE)}&am=${enc(safe)}&tn=${enc(NOTE)}&cu=INR`; }
function intentURI(pkg, upi){ return `intent://${upi.replace('upi://','')}#Intent;package=${pkg};scheme=upi;end`; }

/* small toast */
function showToast(msg, ms=900){ const t = document.getElementById('openToast'); if(!t) return; t.textContent = msg; t.style.display = 'block'; clearTimeout(t._hideTimer); t._hideTimer = setTimeout(()=>{ t.style.display = 'none'; }, ms); }

/* create pill and attach behaviour (mobile only) */
function attachPillBehavior(pill, key){
  let timer=null;
  function start(){
    document.querySelectorAll('.pill').forEach(p=>p.classList.remove('selected'));
    pill.classList.add('selected');
    if(!isMobile) return;
    pill.setAttribute('data-opening','1');
    showToast('Opening app‚Ä¶ tap again to cancel', 900);
    timer=setTimeout(()=>{ pill.removeAttribute('data-opening'); timer=null; openMethod(key); },600);
  }
  function cancel(){ if(timer){ clearTimeout(timer); timer=null; pill.removeAttribute('data-opening'); showToast('Opening cancelled',900); return true; } return false; }
  pill.querySelector('.label').onclick = ()=>{ if(cancel()) return; start(); };
  pill.querySelector('.action').onclick = (e)=>{ e.stopPropagation(); if(cancel()) return; openMethod(key); };
}
function createPill(key, def){
  const pill=document.createElement('div'); pill.className='pill'; pill.dataset.key=key;
  pill.innerHTML = `<div class="label"><div class="logo">${def.title.charAt(0)}</div><div><div class="title">${def.title}</div><div class="desc">${def.desc}</div></div></div><div class="action">Open</div>`;
  attachPillBehavior(pill,key); return pill;
}

/* build methods depending on device */
function buildMethods(){
  wrapper.innerHTML='';
  if(device==='desktop') return;
  if(device==='ios'){ wrapper.appendChild(createPill('whatsapp',METHODS.whatsapp)); wrapper.appendChild(createPill('bhim',METHODS.bhim)); }
  else { wrapper.appendChild(createPill('gpay',METHODS.gpay)); wrapper.appendChild(createPill('phonepe',METHODS.phonepe)); wrapper.appendChild(createPill('bhim',METHODS.bhim)); wrapper.appendChild(createPill('whatsapp',METHODS.whatsapp)); }
}

/* open chosen method */
function openMethod(key){
  const amt = Number(amountInput.value) || 0;
  const upi = buildUPI(amt);
  if(device === 'android'){
    const pkg = METHODS[key].pkg;
    if(pkg){ window.location.href = intentURI(pkg, upi); return; }
    window.location.href = upi; return;
  }
  window.location.href = upi;
}

/* QR toggle and form open */
showQRtoggle.onclick = ()=>{ qrCard.style.display = (qrCard.style.display==='block'?'none':'block'); };
openFormBtn.addEventListener('click', (e)=>{ e.preventDefault(); window.open(GOOGLE_FORM_URL,'_blank','noopener'); });
openFormBtn.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') { e.preventDefault(); window.open(GOOGLE_FORM_URL,'_blank','noopener'); } });

/* copy UPI */
copyQRupi.onclick = async ()=>{ try{ await navigator.clipboard.writeText(UPI_ID); copyQRupi.textContent='Copied!'; setTimeout(()=>copyQRupi.textContent='Copy',1200);}catch(e){ alert('Copy failed ‚Äî use: '+UPI_ID); } };

/* amount handling */
document.querySelectorAll('.preset').forEach(btn=>btn.addEventListener('click', ()=>{ amountInput.value = btn.dataset.val; refresh(); }));
amountInput.addEventListener('input', refresh);
function refresh(){ const amt = Number(amountInput.value)||0; bigAmount.textContent = '‚Çπ '+(amt>0?amt.toLocaleString():'0'); qrImg.title = buildUPI(amt); upiText.textContent = UPI_ID; }

/* init */
const isMobile = (device === 'android' || device === 'ios');
buildMethods();
refresh();
if(device==='desktop'){ qrCard.style.display='block'; showQRtoggle.style.display='none'; } else { qrCard.style.display='none'; showQRtoggle.style.display='block'; }
qrImg.onerror = ()=>{ const amt=Number(amountInput.value)||0; qrImg.src='https://chart.googleapis.com/chart?cht=qr&chs=240x240&chl='+encodeURIComponent(buildUPI(amt)); };
</script>
</body>
</html>
